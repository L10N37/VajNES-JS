// Commonly-used NES palettes from emulation sources:
// - nesClassic (hardwareâ€‘approximation / neutral)
// - fceuxDefault (FCEUX default palette)
// - smc2005 (mildly saturated "Nintendo Power" style)
// - all FBX palette files were converted into HTML RGBA values (...this might seem a little obvious :P)

window.PALETTES = {
    nesClassic: {
        0x00: "#7C7C7C", 0x01: "#0000FC", 0x02: "#0000BC", 0x03: "#4428BC",
        0x04: "#940084", 0x05: "#A80020", 0x06: "#A81000", 0x07: "#881400",
        0x08: "#503000", 0x09: "#007800", 0x0A: "#006800", 0x0B: "#005800",
        0x0C: "#004058", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
        0x10: "#BCBCBC", 0x11: "#0078F8", 0x12: "#0058F8", 0x13: "#6844FC",
        0x14: "#D800CC", 0x15: "#E40058", 0x16: "#F83800", 0x17: "#E45C10",
        0x18: "#AC7C00", 0x19: "#00B800", 0x1A: "#00A800", 0x1B: "#00A844",
        0x1C: "#008888", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
        0x20: "#F8F8F8", 0x21: "#3CBCFC", 0x22: "#6888FC", 0x23: "#9878F8",
        0x24: "#F878F8", 0x25: "#F85898", 0x26: "#F87858", 0x27: "#FCA044",
        0x28: "#F8B800", 0x29: "#B8F818", 0x2A: "#58D854", 0x2B: "#58F898",
        0x2C: "#00E8D8", 0x2D: "#787878", 0x2E: "#000000", 0x2F: "#000000",
        0x30: "#FCFCFC", 0x31: "#A4E4FC", 0x32: "#B8B8F8", 0x33: "#D8B8F8",
        0x34: "#F8B8F8", 0x35: "#F8A4C0", 0x36: "#F0D0B0", 0x37: "#FCE0A8",
        0x38: "#F8D878", 0x39: "#D8F878", 0x3A: "#B8F8B8", 0x3B: "#B8F8D8",
        0x3C: "#00FCFC", 0x3D: "#F8D8F8", 0x3E: "#000000", 0x3F: "#000000"
      },
  
    fceuxDefault: {
      0x00: "#7F7F7F", 0x01: "#0000FF", 0x02: "#1B00FF", 0x03: "#4E00B2",
      0x04: "#850085", 0x05: "#A50028", 0x06: "#A20A00", 0x07: "#7B1400",
      0x08: "#4D2000", 0x09: "#137600", 0x0A: "#006A00", 0x0B: "#005900",
      0x0C: "#004C82", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
      0x10: "#B8B8B8", 0x11: "#0078F8", 0x12: "#0058F8", 0x13: "#6844FC",
      0x14: "#D800CC", 0x15: "#E40058", 0x16: "#F83800", 0x17: "#E45C10",
      0x18: "#AC7C00", 0x19: "#00B800", 0x1A: "#00A800", 0x1B: "#00A844",
      0x1C: "#008888", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
      0x20: "#F8F8F8", 0x21: "#3CBCFC", 0x22: "#6888FC", 0x23: "#9878F8",
      0x24: "#F878F8", 0x25: "#F85898", 0x26: "#F87858", 0x27: "#FCA044",
      0x28: "#F8B800", 0x29: "#B8F818", 0x2A: "#58D854", 0x2B: "#58F898",
      0x2C: "#00E8D8", 0x2D: "#787878", 0x2E: "#000000", 0x2F: "#000000",
      0x30: "#FCFCFC", 0x31: "#A4E4FC", 0x32: "#B8B8F8", 0x33: "#D8B8F8",
      0x34: "#F8B8F8", 0x35: "#F8A4C0", 0x36: "#F0D0B0", 0x37: "#FCE0A8",
      0x38: "#F8D878", 0x39: "#D8F878", 0x3A: "#B8F8B8", 0x3B: "#B8F8D8",
      0x3C: "#00FCFC", 0x3D: "#F8D8F8", 0x3E: "#000000", 0x3F: "#000000"
    },
  
    smc2005: {
      0x00: "#8B8B7F", 0x01: "#1414CE", 0x02: "#3C00C0", 0x03: "#6000A8",
      0x04: "#900098", 0x05: "#A40030", 0x06: "#A40008", 0x07: "#8C1800",
      0x08: "#681C00", 0x09: "#008000", 0x0A: "#007800", 0x0B: "#007A14",
      0x0C: "#006C60", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
      0x10: "#B8B8B8", 0x11: "#0044FF", 0x12: "#3858FF", 0x13: "#7058FF",
      0x14: "#D800D8", 0x15: "#F80050", 0x16: "#FC5800", 0x17: "#F46814",
      0x18: "#B6A800", 0x19: "#009000", 0x1A: "#00A000", 0x1B: "#00A850",
      0x1C: "#00A8A8", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
      0x20: "#F8F8F8", 0x21: "#58B8FF", 0x22: "#7898FC", 0x23: "#B8B8F8",
      0x24: "#E8B8F8", 0x25: "#F8A4C0", 0x26: "#F8C090", 0x27: "#FCC870",
      0x28: "#FCF890", 0x29: "#C8FC90", 0x2A: "#90FCA8", 0x2B: "#90FCFC",
      0x2C: "#68F8F8", 0x2D: "#A8A8A8", 0x2E: "#000000", 0x2F: "#000000",
      0x30: "#FCFCFC", 0x31: "#C8E8FC", 0x32: "#D8D8FC", 0x33: "#E8D8FC",
      0x34: "#F8D8FC", 0x35: "#F8D8E0", 0x36: "#F0E0D0", 0x37: "#F8F0D8",
      0x38: "#F8F8B8", 0x39: "#E0F8B8", 0x3A: "#D0F8D8", 0x3B: "#D0F8F8",
      0x3C: "#A8F8F8", 0x3D: "#E8D8F8", 0x3E: "#000000", 0x3F: "#000000"
   },

  fbxMagnum: {
    0x00: "#606060", 0x01: "#00148F", 0x02: "#1E029B", 0x03: "#3F008A",
    0x04: "#600060", 0x05: "#660017", 0x06: "#570D00", 0x07: "#3C1F00",
    0x08: "#1B3300", 0x09: "#004200", 0x0A: "#004500", 0x0B: "#003C1F",
    0x0C: "#00315C", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#A6A6A6", 0x11: "#0F4BD4", 0x12: "#412DEB", 0x13: "#6C1DD9",
    0x14: "#9C17AB", 0x15: "#A71A4D", 0x16: "#993200", 0x17: "#7C4A00",
    0x18: "#546400", 0x19: "#1A7800", 0x1A: "#007F00", 0x1B: "#00763E",
    0x1C: "#00678F", 0x1D: "#010101", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#4C9CFF", 0x22: "#7278FF", 0x23: "#9B64FF",
    0x24: "#D964FF", 0x25: "#F064B6", 0x26: "#F37B50", 0x27: "#D5930F",
    0x28: "#B3AF0C", 0x29: "#78C403", 0x2A: "#41D232", 0x2B: "#34CA76",
    0x2C: "#37BCC6", 0x2D: "#4A4A4A", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#AED6FF", 0x32: "#BFC0FF", 0x33: "#CAB9FF",
    0x34: "#E6BEFD", 0x35: "#F5BEE1", 0x36: "#F5C8B9", 0x37: "#F0D7A0",
    0x38: "#E3E095", 0x39: "#C6EC95", 0x3A: "#B5EBA8", 0x3B: "#AAE6C3",
    0x3C: "#ABE5E7", 0x3D: "#B1B1B1", 0x3E: "#000000", 0x3F: "#000000",
    },

  fbxSmooth: {
    0x00: "#6A6D6A", 0x01: "#001380", 0x02: "#1E008A", 0x03: "#39007A",
    0x04: "#550056", 0x05: "#5A0018", 0x06: "#4F1000", 0x07: "#3D1C00",
    0x08: "#253200", 0x09: "#003D00", 0x0A: "#004000", 0x0B: "#003924",
    0x0C: "#002E55", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B9BCB9", 0x11: "#1850C7", 0x12: "#4B30E3", 0x13: "#7322D6",
    0x14: "#951FA9", 0x15: "#9D285C", 0x16: "#983700", 0x17: "#7F4C00",
    0x18: "#5E6400", 0x19: "#227700", 0x1A: "#027E02", 0x1B: "#007645",
    0x1C: "#006E8A", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#68A6FF", 0x22: "#8C9CFF", 0x23: "#B586FF",
    0x24: "#D975FD", 0x25: "#E377B9", 0x26: "#E58D68", 0x27: "#D49D29",
    0x28: "#B3AF0C", 0x29: "#7BC211", 0x2A: "#55CA47", 0x2B: "#46CB81",
    0x2C: "#47C1C5", 0x2D: "#4A4D4A", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#CCEAFF", 0x32: "#DDDEFF", 0x33: "#ECDAFF",
    0x34: "#F8D7FE", 0x35: "#FCD6F5", 0x36: "#FDDBCF", 0x37: "#F9E7B5",
    0x38: "#F1F0AA", 0x39: "#DAFAA9", 0x3A: "#C9FFBC", 0x3B: "#C3FBD7",
    0x3C: "#C4F6F6", 0x3D: "#BEC1BE", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxCompositeDirectFinal: {
    0x00: "#6B6B6B", 0x01: "#001E87", 0x02: "#1F0B96", 0x03: "#3B0C87",
    0x04: "#590D61", 0x05: "#5E0A1F", 0x06: "#551100", 0x07: "#3D2700",
    0x08: "#233E00", 0x09: "#004B00", 0x0A: "#004E00", 0x0B: "#00461F",
    0x0C: "#00395C", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B2B2B2", 0x11: "#1A53D1", 0x12: "#4835EE", 0x13: "#7123EC",
    0x14: "#9A1EB7", 0x15: "#A51E62", 0x16: "#9D3705", 0x17: "#825400",
    0x18: "#607100", 0x19: "#298400", 0x1A: "#038B00", 0x1B: "#008240",
    0x1C: "#017690", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#63ADFD", 0x22: "#908AFE", 0x23: "#B977FC",
    0x24: "#E771FE", 0x25: "#F76FC9", 0x26: "#F5836A", 0x27: "#DD9C29",
    0x28: "#BDB807", 0x29: "#84D107", 0x2A: "#5BDC3B", 0x2B: "#48D77D",
    0x2C: "#4BCDCD", 0x2D: "#555555", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#C4E3FE", 0x32: "#D7D5FE", 0x33: "#E6CDFE",
    0x34: "#F9CAFE", 0x35: "#FEC9F0", 0x36: "#FED1C7", 0x37: "#F7DCAC",
    0x38: "#E8E89C", 0x39: "#D1F29D", 0x3A: "#BFF4B1", 0x3B: "#B7F5CD",
    0x3C: "#B8F1ED", 0x3D: "#BEBEBE", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxVibrant: {
    0x00: "#676767", 0x01: "#001F8E", 0x02: "#23069E", 0x03: "#40008E",
    0x04: "#600067", 0x05: "#67001C", 0x06: "#5B1000", 0x07: "#432500",
    0x08: "#313400", 0x09: "#074800", 0x0A: "#004F00", 0x0B: "#004622",
    0x0C: "#003A61", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B3B3B3", 0x11: "#205ADF", 0x12: "#5138FB", 0x13: "#7A27EE",
    0x14: "#A520C2", 0x15: "#B0226B", 0x16: "#AD3702", 0x17: "#8D5600",
    0x18: "#6E7000", 0x19: "#2E8A00", 0x1A: "#069200", 0x1B: "#008A47",
    0x1C: "#037B9B", 0x1D: "#101010", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#62AEFF", 0x22: "#918BFF", 0x23: "#BC78FF",
    0x24: "#E96EFF", 0x25: "#FC6CCD", 0x26: "#FA8267", 0x27: "#E29B26",
    0x28: "#C0B901", 0x29: "#84D200", 0x2A: "#58DE38", 0x2B: "#46D97D",
    0x2C: "#49CED2", 0x2D: "#494949", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#B4E0FF", 0x32: "#C7C4FF", 0x33: "#E0B5FF",
    0x34: "#FBB0FF", 0x35: "#FFB0E7", 0x36: "#FFBCA8", 0x37: "#F9C684",
    0x38: "#E5E16C", 0x39: "#C5ED6F", 0x3A: "#A8F2A0", 0x3B: "#9FF2C2",
    0x3C: "#9DEDED", 0x3D: "#A0A0A0", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxSmoothBalancedGreys: {
    0x00: "#6A6A6A", 0x01: "#001380", 0x02: "#1E008A", 0x03: "#39007A",
    0x04: "#550056", 0x05: "#5A0018", 0x06: "#4F1000", 0x07: "#3D1C00",
    0x08: "#253200", 0x09: "#003D00", 0x0A: "#004000", 0x0B: "#003924",
    0x0C: "#002E55", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B9B9B9", 0x11: "#1850C7", 0x12: "#4B30E3", 0x13: "#7322D6",
    0x14: "#951FA9", 0x15: "#9D285C", 0x16: "#983700", 0x17: "#7F4C00",
    0x18: "#5E6400", 0x19: "#227700", 0x1A: "#027E02", 0x1B: "#007645",
    0x1C: "#006E8A", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#68A6FF", 0x22: "#8C9CFF", 0x23: "#B586FF",
    0x24: "#D975FD", 0x25: "#E377B9", 0x26: "#E58D68", 0x27: "#D49D29",
    0x28: "#B3AF0C", 0x29: "#7BC211", 0x2A: "#55CA47", 0x2B: "#46CB81",
    0x2C: "#47C1C5", 0x2D: "#4A4A4A", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#CCEAFF", 0x32: "#DDDEFF", 0x33: "#ECDAFF",
    0x34: "#F8D7FE", 0x35: "#FCD6F5", 0x36: "#FDDBCF", 0x37: "#F9E7B5",
    0x38: "#F1F0AA", 0x39: "#DAFAA9", 0x3A: "#C9FFBC", 0x3B: "#C3FBD7",
    0x3C: "#C4F6F6", 0x3D: "#BEBEBE", 0x3E: "#000000", 0x3F: "#000000"
  },

    fbxNesClassic:  {
    0x00: "#60615F", 0x01: "#001990", 0x02: "#2209A4", 0x03: "#420193",
    0x04: "#62006B", 0x05: "#670022", 0x06: "#5B1100", 0x07: "#432700",
    0x08: "#263E00", 0x09: "#004B00", 0x0A: "#004E00", 0x0B: "#00461F",
    0x0C: "#00395B", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#A9AAAA", 0x11: "#1A55D4", 0x12: "#4836F1", 0x13: "#7323E8",
    0x14: "#9C1EB9", 0x15: "#A61E5E", 0x16: "#9B3600", 0x17: "#815300",
    0x18: "#617000", 0x19: "#288300", 0x1A: "#028A00", 0x1B: "#008241",
    0x1C: "#017590", 0x1D: "#0D0D0D", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#64AEFF", 0x22: "#908BFF", 0x23: "#B979FF",
    0x24: "#E672FF", 0x25: "#F671C8", 0x26: "#F48669", 0x27: "#DE9D28",
    0x28: "#BEB807", 0x29: "#85D006", 0x2A: "#5CDC3B", 0x2B: "#49D87C",
    0x2C: "#4CCDCF", 0x2D: "#565656", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#C5E2FE", 0x32: "#D7D6FF", 0x33: "#E7CFFF",
    0x34: "#F8CAFF", 0x35: "#FFC9EF", 0x36: "#FFD1C6", 0x37: "#F7DCAB",
    0x38: "#E6E79B", 0x39: "#D1F19D", 0x3A: "#BFF4B2", 0x3B: "#B8F4CD",
    0x3C: "#B9EAE9", 0x3D: "#ABABAB", 0x3E: "#000000", 0x3F: "#000000"
  },
    fbxYuvV3: {
    0x00: "#666666", 0x01: "#002A88", 0x02: "#1412A7", 0x03: "#3B00A4",
    0x04: "#5C007E", 0x05: "#6E0040", 0x06: "#6C0700", 0x07: "#561D00",
    0x08: "#333500", 0x09: "#0C4800", 0x0A: "#005200", 0x0B: "#004C18",
    0x0C: "#003E5B", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#ADADAD", 0x11: "#155FD9", 0x12: "#4240FF", 0x13: "#7527FE",
    0x14: "#A01ACC", 0x15: "#B71E7B", 0x16: "#B53120", 0x17: "#994E00",
    0x18: "#6B6D00", 0x19: "#388700", 0x1A: "#0D9300", 0x1B: "#008C47",
    0x1C: "#007AA0", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#64B0FF", 0x22: "#9290FF", 0x23: "#C676FF",
    0x24: "#F26AFF", 0x25: "#FF6ECC", 0x26: "#FF8170", 0x27: "#EA9E22",
    0x28: "#BCBE00", 0x29: "#88D800", 0x2A: "#5CE430", 0x2B: "#45E082",
    0x2C: "#48CDDE", 0x2D: "#4F4F4F", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#C0DFFF", 0x32: "#D3D2FF", 0x33: "#E8C8FF",
    0x34: "#FAC2FF", 0x35: "#FFC4EA", 0x36: "#FFCCC5", 0x37: "#F7D8A5",
    0x38: "#E4E594", 0x39: "#CFEF96", 0x3A: "#BDF4AB", 0x3B: "#B3F3CC",
    0x3C: "#B5EBF2", 0x3D: "#B8B8B8", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxUnsaturatedFinal: {
    0x00: "#676767", 0x01: "#001F8E", 0x02: "#23069E", 0x03: "#40008E",
    0x04: "#600067", 0x05: "#67001C", 0x06: "#5B1000", 0x07: "#432500",
    0x08: "#313400", 0x09: "#074800", 0x0A: "#004F00", 0x0B: "#004622",
    0x0C: "#003A61", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B3B3B3", 0x11: "#205ADF", 0x12: "#5138FB", 0x13: "#7A27EE",
    0x14: "#A520C2", 0x15: "#B0226B", 0x16: "#AD3702", 0x17: "#8D5600",
    0x18: "#6E7000", 0x19: "#2E8A00", 0x1A: "#069200", 0x1B: "#008A47",
    0x1C: "#037B9B", 0x1D: "#101010", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#62AEFF", 0x22: "#918BFF", 0x23: "#BC78FF",
    0x24: "#E96EFF", 0x25: "#FC6CCD", 0x26: "#FA8267", 0x27: "#E29B26",
    0x28: "#C0B901", 0x29: "#84D200", 0x2A: "#58DE38", 0x2B: "#46D97D",
    0x2C: "#49CED2", 0x2D: "#494949", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#C1E3FF", 0x32: "#D5D4FF", 0x33: "#E7CCFF",
    0x34: "#FBC9FF", 0x35: "#FFC7F0", 0x36: "#FFD0C5", 0x37: "#F8DAAA",
    0x38: "#EBE69A", 0x39: "#D1F19A", 0x3A: "#BEF7AF", 0x3B: "#B6F4CD",
    0x3C: "#B7F0EF", 0x3D: "#B2B2B2", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxD93PvmStyle: {
    0x00: "#696B63", 0x01: "#001774", 0x02: "#1E0087", 0x03: "#340073",
    0x04: "#560057", 0x05: "#5E0013", 0x06: "#531A00", 0x07: "#3B2400",
    0x08: "#243000", 0x09: "#063A00", 0x0A: "#003F00", 0x0B: "#003B1E",
    0x0C: "#00334E", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B9BBB3", 0x11: "#1453B9", 0x12: "#4D2CDA", 0x13: "#671EDE",
    0x14: "#98189C", 0x15: "#9D2344", 0x16: "#A03E00", 0x17: "#8D5500",
    0x18: "#656D00", 0x19: "#2C7900", 0x1A: "#008100", 0x1B: "#007D42",
    0x1C: "#00788A", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#69A8FF", 0x22: "#9691FF", 0x23: "#B28AFA",
    0x24: "#EA7DFA", 0x25: "#F37BC7", 0x26: "#F28E59", 0x27: "#E6AD27",
    0x28: "#D7C805", 0x29: "#90DF07", 0x2A: "#64E53C", 0x2B: "#45E27D",
    0x2C: "#48D5D9", 0x2D: "#4E5048", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#D2EAFF", 0x32: "#E2E2FF", 0x33: "#E9D8FF",
    0x34: "#F5D2FF", 0x35: "#F8D9EA", 0x36: "#FADEB9", 0x37: "#F9E89B",
    0x38: "#F3F28C", 0x39: "#D3FA91", 0x3A: "#B8FCA8", 0x3B: "#AEFACA",
    0x3C: "#CAF3F3", 0x3D: "#BEC0B8", 0x3E: "#000000", 0x3F: "#000000"
  },

  fbxD65PvmStyle: {
    0x00: "#696964", 0x01: "#001774", 0x02: "#28007D", 0x03: "#3E006D",
    0x04: "#560057", 0x05: "#5E0013", 0x06: "#531A00", 0x07: "#3B2400",
    0x08: "#2A3000", 0x09: "#143A00", 0x0A: "#003F00", 0x0B: "#003B1E",
    0x0C: "#003050", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B9B9B4", 0x11: "#1453B9", 0x12: "#4D2CDA", 0x13: "#7A1EC8",
    0x14: "#98189C", 0x15: "#9D2344", 0x16: "#A03E00", 0x17: "#8D5500",
    0x18: "#656D00", 0x19: "#2C7900", 0x1A: "#008100", 0x1B: "#007D42",
    0x1C: "#00788A", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#69A8FF", 0x22: "#9A96FF", 0x23: "#C28AFA",
    0x24: "#EA7DFA", 0x25: "#F387B4", 0x26: "#F1986C", 0x27: "#E6B327",
    0x28: "#D7C805", 0x29: "#90DF07", 0x2A: "#64E53C", 0x2B: "#45E27D",
    0x2C: "#48D5D9", 0x2D: "#4B4B46", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#D2EAFF", 0x32: "#E2E2FF", 0x33: "#F2D8FF",
    0x34: "#F8D2FF", 0x35: "#F8D9EA", 0x36: "#FADEB9", 0x37: "#F9E89B",
    0x38: "#F3F28C", 0x39: "#D3FA91", 0x3A: "#B8FCA8", 0x3B: "#AEFACA",
    0x3C: "#CAF3F3", 0x3D: "#BEBEB9", 0x3E: "#000000", 0x3F: "#000000"
  },

fbxOriginalHardware: {
    0x00: "#6A6D6A", 0x01: "#00127D", 0x02: "#180082", 0x03: "#3B007D",
    0x04: "#56005D", 0x05: "#5A0018", 0x06: "#4F0D00", 0x07: "#381E00",
    0x08: "#203100", 0x09: "#003D00", 0x0A: "#004000", 0x0B: "#003B1E",
    0x0C: "#002E55", 0x0D: "#000000", 0x0E: "#000000", 0x0F: "#000000",
    0x10: "#B9BCB9", 0x11: "#194EC8", 0x12: "#472FE3", 0x13: "#751FD7",
    0x14: "#931EAD", 0x15: "#9E245E", 0x16: "#963800", 0x17: "#7B5000",
    0x18: "#5B6700", 0x19: "#267A00", 0x1A: "#007F00", 0x1B: "#007842",
    0x1C: "#006E8A", 0x1D: "#000000", 0x1E: "#000000", 0x1F: "#000000",
    0x20: "#FFFFFF", 0x21: "#69AEFF", 0x22: "#9798FF", 0x23: "#B687FF",
    0x24: "#E278FF", 0x25: "#F279C7", 0x26: "#F58F6F", 0x27: "#DDA932",
    0x28: "#BCB70D", 0x29: "#88D015", 0x2A: "#60DB49", 0x2B: "#4FD687",
    0x2C: "#50CACE", 0x2D: "#515451", 0x2E: "#000000", 0x2F: "#000000",
    0x30: "#FFFFFF", 0x31: "#CCEAFF", 0x32: "#DEE2FF", 0x33: "#EEDAFF",
    0x34: "#FAD7FD", 0x35: "#FDD7F6", 0x36: "#FDDCD0", 0x37: "#FAE8B6",
    0x38: "#F2F1A9", 0x39: "#DBFBA9", 0x3A: "#CAFFBD", 0x3B: "#C3FBD8",
    0x3C: "#C4F6F6", 0x3D: "#BEC1BE", 0x3E: "#000000", 0x3F: "#000000"
}

};

  window.currentPaletteName = "nesClassic";
  window.currentPalette = window.PALETTES[window.currentPaletteName];
  
  function setCurrentPalette(name) {
    if (window.PALETTES[name]) {
      window.currentPaletteName = name;
      window.currentPalette = window.PALETTES[name];
      console.debug(`[Palette] using '${name}'`);
    } else {
      console.warn(`[Palette] Unknown palette name '${name}'`);
    }

    // for instant frame redraw with new palette selection (if game paused etc.)
    if (typeof window._rebuildPaletteLUT === 'function') window._rebuildPaletteLUT();
    if (typeof window.redrawWithCurrentPalette === 'function') window.redrawWithCurrentPalette();

  }
  window.setCurrentPalette = setCurrentPalette;
  
  function getColorForNESByte(nesByte) {
    const idx = nesByte & 0x3F;
    return window.currentPalette?.[idx] || "#000000";
  }
  window.getColorForNESByte = getColorForNESByte;
  
  // palette selection
  document.querySelectorAll('input[name="palette"]').forEach((radio) => {
    radio.addEventListener('change', (e) => {
      const selectedPalette = e.target.value;
      setCurrentPalette(selectedPalette);
      console.debug(`[TileViewer] Selected palette: ${selectedPalette}`);
  
      if (window.lastCHRData) {
        drawTilesToCanvas(window.lastCHRData, "bgCanvas");
        drawTilesToCanvas(window.lastCHRData, "fgCanvas");
      }
    });
  });
  
